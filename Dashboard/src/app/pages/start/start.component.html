<div class="container" fxLayout="row wrap" fxLayoutGap="1rem" fxLayoutAllign="space-around">
    <div fxFlex=100>
        <mat-card>
            <mat-card-title>Aktueller Stand der Impfkampagne</mat-card-title>
            <mat-card-content>
                <br><br>
                <div fxLayout="row wrap" fxLayoutGap="1rem" fxLayoutAllign="space-around">
                    <div fxFlex fxFlex.lt-md=100>
                        <p *ngIf="this.stand_impfungen_bund">
                            <span class="accentcolor bignum">{{this.stand_impfungen_bund['Zahl der Impfungen gesamt'] |
                                number:'1.0-0'}}</span><br>
                            Dosen insgesamt verimpft
                        </p>
                    </div>
                    <div fxFlex=30 fxFlex.lt-md=100>
                        <p *ngIf="this.stand_impfungen_bund">
                            <span class="accentcolor bignum">{{this.stand_impfungen_bund['Zahl der Impfungen gesamt']/(this.days_since_start/7) |
                                number:'1.0-0'}}</span><br>
                            Impfungen pro Woche
                        </p>
                    </div>
                    <div fxFlex=30 fxFlex.lt-md=100>
                        <p *ngIf="this.stand_impfungen_bund">
                            <span class="accentcolor bignum">{{this.stand_impfungen_bund['Zahl der Impfungen gesamt']/(this.days_since_start) |
                                number:'1.0-0'}}</span><br>
                            Impfungen pro Tag
                        </p>
                    </div>
                </div>
            </mat-card-content>

        </mat-card>

    </div>
    <div fxFlex fxFlex.lt-md=100>
        <mat-card>
            <mat-card-title>Auswahl der Parameter</mat-card-title>
            <mat-card-content>
                <br>
                <div fxLayout="row wrap" fxLayoutGap="1rem" fxLayoutAllign="space-around">
                    <div fxFlex=40 fxFlex.lt-md=100>
                        <h2>
                            <strong>Impfzentren</strong><br>
                            <span>
                                <mat-icon class="accentcolor bigicon" [inline]="true">corporate_fare</mat-icon>
                            </span>
                        </h2>
                        <p>Anzahl:
                            <mat-slider [(ngModel)]="this.params.n_impfzentren" min="100" max="500" step="10"
                                (change)="this.update_kapazitaet();"></mat-slider> {{this.params.n_impfzentren}}
                        </p>
                        <p>Patienten pro Tag:
                            <mat-slider [(ngModel)]="this.params.n_impfzentren_pat" min="100" max="1000" step="10"
                                (change)="this.update_kapazitaet();"></mat-slider> {{this.params.n_impfzentren_pat}}
                        </p>
                        <p>Arbeitstage pro Woche:
                            <mat-slider [(ngModel)]="this.params.impfzentren_tage" min="0" max="7" step="1"
                                (change)="this.update_kapazitaet();"></mat-slider> {{this.params.impfzentren_tage}}
                        </p>
                    </div>
                    <div fxFlex=40 fxFlex.lt-md=100>
                        <h2>
                            <strong>Vertragsärzte</strong><br>
                            <span>
                                <mat-icon class="accentcolor bigicon" [inline]="true">local_hospital</mat-icon>
                            </span>
                        </h2>
                        <p>Anzahl:
                            <mat-slider [(ngModel)]="this.params.n_varzt" min="0" max="50000" step="1000"
                                (change)="this.update_kapazitaet();"></mat-slider> {{this.params.n_varzt}}
                        </p>
                        <p>Patienten pro Tag:
                            <mat-slider [(ngModel)]="this.params.n_varzt_pat" min="10" max="80" step="10"
                                (change)="this.update_kapazitaet();"></mat-slider> {{this.params.n_varzt_pat}}
                        </p>
                        <p>Arbeitstage pro Woche:
                            <mat-slider [(ngModel)]="this.params.varzt_tage" min="0" max="7" step="1"
                                (change)="this.update_kapazitaet();"></mat-slider> {{this.params.varzt_tage}}
                        </p>
                    </div>
                </div>
                <div fxLayout="column" fxLayoutGap="2rem">
                    <div>
                        <h2><strong>Impfkapazität</strong><br>
                        </h2>
                    </div>
                    <div fxLayout="row wrap" fxLayoutGap="5rem">
                        <div fxFlex=45 fxFlex.lt-l=100>
                            <div class="mat-padding">
                                <p>
                                    <span class="accentcolor bignum">{{this.params.kapazitaet_pro_tag |
                                        number:'1.0-0'}}</span><br>
                                    Dosen pro Tag
                                </p>
                            </div>
                        </div>
                        <div class="mat-padding" fxFlex=45 fxFlex.lt-l=100>
                            <div>
                                <p>
                                    <span class="accentcolor bignum">{{this.params.kapazitaet_pro_woche |
                                        number:'1.0-0'}}</span><br>
                                    Dosen pro Woche
                                </p>
                            </div>
                        </div>
                    </div>

                </div>
            </mat-card-content>
        </mat-card>

    </div>
    <div fxFlex=100>
        <mat-card>
            <mat-card-title>Simulation</mat-card-title>
            <mat-card-subtitle>Vereinfachte Simulation auf Basis der Parameter</mat-card-subtitle>
            <div fxLayout="column" fxLayoutGap="1rem" fxLayoutAllign="space-around">
                <div fxFlex=100>
                    <h2>Impfstoffszenario</h2>
                    <mat-radio-group class="my-radio-group" 
                    [(ngModel)]="this.params.verteilungszenario"    
                    (change)="this.update_kapazitaet();"                
                    >
                        <ng-container  *ngFor="let szenario of this.verteilungszenarien">
                            <mat-radio-button class="my-radio-button" [value]="szenario">{{szenario}}</mat-radio-button>    
                        </ng-container>
                        
                        
                      </mat-radio-group>
                </div>
                <div fxFlex=100>
                    <h2>Ergebnisse</h2>
                    <div fxLayout="row wrap">
                        <div fxFlex=100 *ngIf="this.sim_result">                                                 
                        <h2>Verfügbarkeit von Impfdosen</h2>
                        <div>
                                  <app-plot [(data)]="this.sim_result"  
                                   [custommargins]="{ l: 0, r: 0, b: 25, t: 0 }"
                                    xvalue="kw" [outcomes]="['Dosen']"
                                   plottype="tsline"></app-plot> 
                        </div>
                    
                                    <div class="padding lightgreycolor">
                                        <p class="mat-caption">
                                            Legende:<br>Projektion auf Basis der aktuellen Verträge mit den Herstellern.
                                        </p>
                                    </div>                          

                        </div>

                    </div>

                </div>
            </div>
        </mat-card>

    </div>

    <div fxFlex fxFlex.lt-md=100>
        <div style="min-width: 300px;padding:10px;">
            <h2>Hintergrund zu den Modellrechnungen</h2>
            <p>Ausgangspunkte der Modellrechnung sind die im Rahmen des Impfgipfels bereitgestellten Informationen zu
                Liefermengen und zur bundesweiten Kapazität der Impfzentren. Bis zum 21. September 2021 wird von einer
                wöchentlichen Impfstoffverfügbarkeit von 900tsd- bis 9,7 Mio. Dosen ausgegangen. Die Kapazität der
                Impfzentren beträgt derzeit 1,4. Mio. Impfungen pro KW (200.000 täglich) und kann sicherlich auf 2,1
                Mio. Impfungen (300.000 täglich) gesteigert werden.</p>
            <p> Weitere Kapazitätssteigerungen scheinen nur durch die
                Einbeziehung der Vertragsärztinnen und Vertragsärzte kurzfristig umsetztbar. Wir gehen davon aus,
                dass im niedergelassenen Bereich ca. 10 Dosen pro Arbeitsstunde verabreicht werden können.
            </p>
            <p>
                Mit dem interaktiven Rechner kann untersucht werden, welche Auswirkungen Veränderunger der
                Impforganisation auf die Zahl der durchführbaren Impfungen und den Zeitpunkt einer möglichen
                Immunisierung der Bevölkerung haben.
            </p>
        </div>
    </div>
</div>